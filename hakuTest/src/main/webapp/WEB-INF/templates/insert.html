<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" lang="ja">

<head>
<title>会員情報登録</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- basic styles -->

    <link rel="stylesheet" href="../../css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}"/>
    <link rel="stylesheet" href="../../assets/css/font-awesome.min.css" th:href="@{/css/font-awesome.min.css}"/>

    <!--[if IE 7]>
      <link rel="stylesheet" href="assets/css/font-awesome-ie7.min.css" />
    <![endif]-->

    <!-- page specific plugin styles -->

    <link rel="stylesheet" href="../../assets/css/select2.css" th:href="@{/css/select2.css}"/>

    <!-- ace styles -->

    <link rel="stylesheet" href="../../assets/css/ace.min.css" th:href="@{/css/ace.min.css}"/>
    <link rel="stylesheet" href="../../assets/css/ace-rtl.min.css" th:href="@{/css/ace-rtl.min.css}"/>
    <link rel="stylesheet" href="../../assets/css/ace-skins.min.css" th:href="@{/css/ace-skins.min.css}"/>
    <link rel="stylesheet" type="text/css" media="all" href="../../css/insert.css" th:href="@{/css/insert.css}" />

    <!--[if lte IE 8]>
      <link rel="stylesheet" href="assets/css/ace-ie.min.css" />
    <![endif]-->

    <!-- inline styles related to this page -->

    <!-- ace settings handler -->

    <script src="../../assets/js/ace-extra.min.js" th:src="@{/js/ace-extra.min.js}"></script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->

    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div>
      <div id="nav">
        <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
          <div class="container-fluid">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse"
                  data-target="#dy-navbar-collapse">
                <span class="sr-only">change</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html" th:href="@{/}">ホーム</a>
            </div>
            <div class="collapse navbar-collapse" id="dy-navbar-collapse">
              <ul class="nav navbar-nav">
                <li><a href="http://www.futuretechlabs.co.jp">フューチャーテックラボ</a></li>
                <li class="active"><a href="insert.html" th:href="@{/insert}">新規会員</a></li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                   お問い合わせ<b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu">
                    <li><a href="http://www.futuretechlabs.co.jp/contact.html">お問い合わせ①</a></li>
                    <li><a href="http://www.futuretechlabs.co.jp/contact.html">お問い合わせ②</a></li>
                    <li><a href="http://www.futuretechlabs.co.jp/contact.html">お問い合わせ③</a></li>
                    <li class="divider"></li>
                    <li><a href="http://www.futuretechlabs.co.jp/contact.html">お問い合わせ④</a></li>
                    <li class="divider"></li>
                    <li><a href="http://www.futuretechlabs.co.jp/contact.html">お問い合わせ⑤</a></li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </div>
    <form class="form-horizontal" id="validation-form" name="validation-form" action="#" th:object="${companyInfo}" th:action="@{/insert?save}" th:method="post">
      <input name="stepCnt" id="stepCnt" type="hidden" th:hidden="stepCnt" value="0" th:value="0"/>
      <div class="insertcontainer">
        <div class="col-lg-8 col-lg-offset-2 col-sm-8 col-sm-offset-2">

          <div class="page-content">
            <div class="page-header">
              <h1>
                会員情報
                <small>
                  <i class="icon-double-angle-right"></i>
                  新規作成
                </small>
              </h1>
            </div><!-- /.page-header -->

            <div class="row">
              <div class="col-xs-12">
                <!-- PAGE CONTENT BEGINS -->
                <div class="hr hr-18 hr-double dotted"></div>

                <div class="row-fluid">
                  <div class="span12">
                    <div class="widget-box">
                      <div class="widget-header widget-header-blue widget-header-flat">
                        <h3 class="lighter">最短２分でお申し込み</h3>
                      </div>
                      <div class="widget-body">
                        <div class="widget-main">
                          <div id="fuelux-wizard" class="row-fluid" data-target="#step-container">
                            <ul class="wizard-steps">
                              <li data-target="#step1" class="active">
                                <span class="step">1</span>
                                <span class="title">基本情報</span>
                              </li>

                              <li data-target="#step2">
                                <span class="step">2</span>
                                <span class="title">詳細情報</span>
                              </li>

                              <li data-target="#step3">
                                <span class="step">3</span>
                                <span class="title">登録情報確認</span>
                              </li>
                            </ul>
                          </div>

                          <hr/>
                          <div class="step-content row-fluid position-relative" id="step-container">
                            <div class="step-pane active" id="step1">
                              <h4 class="lighter block green">お客様情報を入れる</h4>
                                <div class="form-group">
                                  <label class="control-label col-xs-12 col-sm-3 no-padding-right" for="companyName" th:text="#{companyInfo.companyName}">companyName:</label>
                                  <div class="col-xs-12 col-sm-9">
                                    <div class="clearfix">
                                      <input type="text" name="companyName" id="companyName" class="col-xs-12 col-sm-4" th:field="*{companyName}"/>
                                    </div>
                                  </div>
                                </div>
                                <div class="space-2"></div>
                                <div class="form-group">
                                  <label class="control-label col-xs-12 col-sm-3 no-padding-right" for="zipCode" th:text="#{companyInfo.zipCode}">zipCode:</label>
                                  <div class="col-xs-12 col-sm-9">
                                    <div class="clearfix">
                                      <input type="text" name="zipCode" id="zipCode" class="col-xs-12 col-sm-4" th:field="*{zipCode}"/>
                                    </div>
                                  </div>
                                </div>
                                <div class="space-2"></div>
                                <div class="form-group">
                                  <label class="control-label col-xs-12 col-sm-3 no-padding-right" for="prefectureSelected" th:text="#{companyInfo.prefecture}">prefecture:</label>

                                  <div class="col-xs-12 col-sm-9">
                                    <select id="prefectureSelected" name="prefectureSelected" class="select2" data-placeholder="選びください..." th:field="*{prefectureSelected}">
                                      <option value="" th:each="prefectureItem : ${allPrefectureEnum}"
                                              th:value="${prefectureItem}" th:text="${prefectureItem.description}">Alaska</option>
                                    </select>
                                  </div>
                                </div>
                                <div class="hr hr-dotted"></div>
                                <div class="form-group">
                                  <label class="control-label col-xs-12 col-sm-3 no-padding-right" for="city" th:text="#{companyInfo.city}">city:</label>
                                  <div class="col-xs-12 col-sm-9">
                                    <div class="clearfix">
                                      <input type="text" name="city" id="city" class="col-xs-12 col-sm-4" th:field="*{city}"/>
                                    </div>
                                  </div>
                                </div>
                                <div class="space-2"></div>
                                <div class="form-group">
                                  <label class="control-label col-xs-12 col-sm-3 no-padding-right" for="building" th:text="#{companyInfo.building}">building:</label>
                                  <div class="col-xs-12 col-sm-9">
                                    <div class="clearfix">
                                      <input type="text" name="building" id="building" class="col-xs-12 col-sm-4" th:field="*{building}"/>
                                    </div>
                                  </div>
                                </div>
                                <div class="space-2"></div>
                                <div class="form-group">
                                  <label class="control-label col-xs-12 col-sm-3 no-padding-right" for="companyUrl" th:text="#{companyInfo.companyUrl}">companyUrl:</label>
                                  <div class="col-xs-12 col-sm-9">
                                    <div class="clearfix">
                                      <input type="url" name="companyUrl" id="companyUrl" class="col-xs-12 col-sm-8" th:field="*{companyUrl}"/>
                                    </div>
                                  </div>
                                </div>
                                <div class="hr hr-dotted"></div>
                                <div class="form-group">
                                  <label class="control-label col-xs-12 col-sm-3 no-padding-right" for="business" th:text="#{companyInfo.business}">business:</label>
                                  <div class="col-xs-12 col-sm-9">
                                    <div class="clearfix">
                                      <input type="text" name="business" id="business" class="col-xs-12 col-sm-4" th:field="*{business}"/>
                                    </div>
                                  </div>
                                </div>
                                <div class="space-2"></div>
                                <div class="form-group">
                                  <label class="control-label col-xs-12 col-sm-3 no-padding-right" for="email" th:text="#{companyInfo.email}">Email Address:</label>

                                  <div class="col-xs-12 col-sm-9">
                                    <div class="clearfix">
                                      <input type="email" name="email" id="email" class="col-xs-12 col-sm-6" th:field="*{email}"/>
                                    </div>
                                  </div>
                                </div>
                                <div class="hr hr-dotted"></div>

                                <div class="space-8"></div>

                                <div class="form-group">
                                  <div class="col-xs-12 col-sm-4 col-sm-offset-3">
                                    <label>
                                      <input name="agree" id="agree" type="checkbox" class="ace" />
                                      <span class="lbl" th:text="#{companyInfo.policy}"> I accept the policy</span>
                                    </label>
                                  </div>
                                </div>
                            </div>

                            <div class="step-pane" id="step2">
                              <div class="row-fluid">
                                <div class="alert alert-success">
                                  <strong>
                                    <i class="icon-ok"></i>
                                    詳細情報を入力する
                                  </strong>
                                  （省略可）
                                  <br />
                                </div>
                              </div>

                                <div class="space-2"></div>
                                <div class="form-group">
                                  <label class="control-label col-xs-12 col-sm-3 no-padding-right" for="operator" th:text="#{companyInfo.operator}">operator:</label>
                                  <div class="col-xs-12 col-sm-9">
                                    <div class="clearfix">
                                      <input type="text" name="operator" id="operator" class="col-xs-12 col-sm-4" th:field="*{operator}"/>
                                    </div>
                                  </div>
                                </div>
                                <div class="space-2"></div>
                                <div class="form-group">
                                  <label class="control-label col-xs-12 col-sm-3 no-padding-right" for="department" th:text="#{companyInfo.department}">department:</label>
                                  <div class="col-xs-12 col-sm-9">
                                    <div class="clearfix">
                                      <input type="text" name="department" id="department" class="col-xs-12 col-sm-4" th:field="*{department}"/>
                                    </div>
                                  </div>
                                </div>
                                <div class="space-2"></div>
                                <div class="form-group">
                                  <label class="control-label col-xs-12 col-sm-3 no-padding-right" for="phoneNumber" th:text="#{companyInfo.phoneNumber}">phoneNumber:</label>
                                  <div class="col-xs-12 col-sm-9">
                                    <div class="input-group">
                                      <span class="input-group-addon">
                                        <i class="icon-phone"></i>
                                      </span>
                                      <input type="tel" name="phoneNumber" id="phoneNumber" class="col-xs-12 col-sm-4" th:field="*{phoneNumber}"/>
                                    </div>
                                  </div>
                                </div>
                            </div>

                            <div class="step-pane" id="step3">
                              <div class="center">
                                <h4 class="green">確認お願いします。</h4>
                                ありがとうございます。
                              </div>
                            </div>
                          </div>

                          <hr />
                          <div class="row-fluid wizard-actions">
                            <button class="btn btn-prev">
                              <i class="icon-arrow-left"></i>
                              前に
                            </button>

                            <button class="btn btn-success btn-next" data-last="登録">
                              次に
                              <i class="icon-arrow-right icon-on-right"></i>
                            </button>
                          </div>
                        </div><!-- /widget-main -->
                      </div><!-- /widget-body -->
                    </div>
                  </div>
                </div>
              </div><!-- /.col -->
            </div><!-- /.row -->
          </div><!-- /.page-content -->
        </div><!-- /.main-container -->
      <!-- basic scripts -->
      </div> <!-- /.insertcontainer -->
    </form>
    <!--[if !IE]> -->
  </div>

    <!-- <![endif]-->

    <!--[if IE]>
<script type="text/javascript">
 window.jQuery || document.write("<script src='assets/js/jquery-1.10.2.min.js'>"+"<"+"/script>");
</script>
<![endif]-->


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="../../js/bootstrap.min.js" th:src="@{/js/bootstrap.min.js}"></script>
    <script src="../../assets/js/typeahead-bs2.min.js" th:src="@{/js/typeahead-bs2.min.js}"></script>

    <!-- page specific plugin scripts -->

    <script src="../../assets/js/fuelux/fuelux.wizard.min.js" th:src="@{/js/fuelux.wizard.min.js}"></script>
    <script src="../../assets/js/jquery.validate.min.js" th:src="@{/js/jquery.validate.min.js}"></script>
    <script src="../../assets/js/additional-methods.min.js" th:src="@{/js/additional-methods.min.js}"></script>
    <script src="../../assets/js/bootbox.min.js" th:src="@{/js/bootbox.min.js}"></script>
    <script src="../../assets/js/jquery.maskedinput.min.js" th:src="@{/js/jquery.maskedinput.min.js}"></script>
    <script src="../../assets/js/select2.min.js" th:src="@{/js/select2.min.js}"></script>

    <!-- ace scripts -->

    <script src="../../assets/js/ace-elements.min.js" th:src="@{/js/ace-elements.min.js}"></script>
    <script src="../../assets/js/ace.min.js" th:src="@{/js/ace.min.js}"></script>

    <!-- inline scripts related to this page -->

    <script type="text/javascript">
      jQuery(function($) {

        $('[data-rel=tooltip]').tooltip();

        $(".select2").css('width','200px').select2({allowClear:true})
        .on('change', function(){
          $(this).closest('form').validate().element($(this));
        });


        var $validation = true;
        $('#fuelux-wizard').ace_wizard().on('change' , function(e, info){
          $('#stepCnt').val(info.step);
          if(info.step == 1 && $validation) {
            if(!$('#validation-form').valid()) return false;
          }
        }).on('finished', function(e) {
            if ($("#validation-form").valid()) {
            	$('#stepCnt').val(3);
            } else {
                $('#stepCnt').val(0);
            };
            bootbox.dialog({
              message: "ありがとうございます!",
              buttons: {
                "success" : {
                    "label" : "完了",
                    "className" : "btn-sm btn-primary",
                    "callback" : function () {
                        $('#stepCnt').val(0);
                    }
                }
              }
            });
        }).on('stepclick', function(e){
          //return false;//prevent clicking on steps
        });

        $.mask.definitions['~']='[+-]';
        $('#phoneNumber').mask('999-9999-9999');

        $('#validation-form').validate({
          errorElement: 'div',
          errorClass: 'help-block',
          focusInvalid: false,
          rules: {
            companyName: {
                required: true,
                minlength: 2
              },
            email: {
              required: true,
              email:true
            },
            companyUrl: {
              required: true,
              url: true
            },
            agree: 'required'
          },

          messages: {
            companyName: {
                required: "会社名前を入力ください",
                minlength: "データのlen＞２."
              },
            email: {
              required: "メールを入力ください",
              email: "メールの格式が不正です。."
            },
            companyUrl: {
                required: "会社のURLを入力ください",
                url: "URLの格式が不正です。."
              },
            agree: "「同意する」チェックボックスにチェックを入れてください。"
          },

          invalidHandler: function (event, validator) { //display error alert on form submit
            //$('.alert-danger', $('.login-form')).show();
          },

          highlight: function (e) {
            $(e).closest('.form-group').removeClass('has-info').addClass('has-error');
          },

          success: function (e) {
            $(e).closest('.form-group').removeClass('has-error').addClass('has-info');
            $(e).remove();
          },

          errorPlacement: function (error, element) {
            if(element.is(':checkbox') || element.is(':radio')) {
              var controls = element.closest('div[class*="col-"]');
              if(controls.find(':checkbox,:radio').length > 1) controls.append(error);
              else error.insertAfter(element.nextAll('.lbl:eq(0)').eq(0));
            }
            else if(element.is('.select2')) {
              error.insertAfter(element.siblings('[class*="select2-container"]:eq(0)'));
            }
            else if(element.is('.chosen-select')) {
              error.insertAfter(element.siblings('[class*="chosen-container"]:eq(0)'));
            }
            else error.insertAfter(element.parent());
          },

          submitHandler: function (form) {
            if($('#stepCnt').val() == 3) {
              form.submit();
            }
          },
          invalidHandler: function (form) {
          }
        });

      })
    </script>

</body>
</html>
